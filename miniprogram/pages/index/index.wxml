<!--pages/index/index.wxml-->
<view class="home-container gradient-bg">
  <!-- 顶部欢迎区 -->
  <view class="welcome-section">
    <view class="welcome-time">
      <text class="time-text">{{currentTime}}</text>
      <text class="date-text">{{currentDate}}</text>
    </view>
    <!-- <view class="welcome-message">
      <text class="greeting">你好，{{userNickname}}</text>
      <text class="subtitle">愿你每天都有好心情 ☀️</text>
    </view> -->
      
    <!-- 情绪测试入口 -->
    <view class="emotion-test-entry"
      bindtap="goToEmotionTest"
      data-period="morning"
      style="opacity:{{morningFilled ? 0.6 : 1}};">
      <view class="entry-content">
        <view class="entry-icon">☀️</view>
        <view class="entry-info">
          <text class="entry-title">早间情绪测试</text>
        </view>
        <view class="entry-status">
          <text class="status-text" style="color:{{morningFilled ? '#bfbfbf' : '#fff'}}">
            {{morningFilled ? '已完成' : '未测试'}}
          </text>
        </view>
      </view>
    </view>
    <view class="emotion-test-entry-ninght"
      bindtap="goToEmotionTest"
      data-period="evening"
      style="opacity:{{eveningFilled ? 0.6 : 1}};">
      <view class="entry-content">
        <view class="entry-icon">🌙</view>
        <view class="entry-info">
          <text class="entry-title">晚间情绪测试</text>
        </view>
        <view class="entry-status">
          <text class="status-text" style="color:{{eveningFilled ? '#bfbfbf' : '#fff'}}">
            {{eveningFilled ? '已完成' : '未测试'}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- 认知评估引导卡片 -->
  <view wx:if="{{showCognitiveGuide}}" class="cognitive-guide-card">
    <view class="guide-header">
      <view class="guide-title-area">
        <text class="guide-icon">🧠</text>
        <view class="guide-text">
          <text class="guide-title">智能认知评估</text>
          <text class="guide-subtitle">AI推荐个性化测评方案</text>
        </view>
      </view>
      <view class="close-btn" catchtap="closeCognitiveGuide">
        <text>×</text>
      </view>
    </view>
    <view class="guide-content">
      <view class="guide-steps">
        <view class="guide-step">
          <text class="step-num">1</text>
          <text class="step-text">AI智能分析</text>
        </view>
        <view class="step-arrow">→</view>
        <view class="guide-step">
          <text class="step-num">2</text>
          <text class="step-text">个性化测评</text>
        </view>
        <view class="step-arrow">→</view>
        <view class="guide-step">
          <text class="step-num">3</text>
          <text class="step-text">专业报告</text>
        </view>
      </view>
      <view class="guide-actions">
        <button class="guide-btn" bindtap="startCognitiveFlow">
          立即开始
        </button>
      </view>
    </view>
  </view>

  <!-- 快捷功能区 -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAssessment">
      <view class="action-icon">📝</view>
      <text class="action-text">认知测评</text>
    </view>
    <view class="action-item" bindtap="goToReports">
      <view class="action-icon">📊</view>
      <text class="action-text">健康报告</text>
    </view>
    <view class="action-item" bindtap="goToArticles">
      <view class="action-icon">📚</view>
      <text class="action-text">健康科普</text>
    </view>
  </view>

  <!-- 功能卡片区 -->
  <view class="features-section">
    <view class="section-title">主要功能</view>

    <!-- 健康测评 -->
    <view class="feature-card" bindtap="goToAssessment">
      <view class="feature-icon">🏥</view>
      <view class="feature-info">
        <text class="feature-title">认知测评</text>
        <text class="feature-desc">专业量表评估心理健康状况</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>

    <!-- 健康报告 -->
    <view class="feature-card" bindtap="goToReports">
      <view class="feature-icon">📊</view>
      <view class="feature-info">
        <text class="feature-title">健康报告</text>
        <text class="feature-desc">查看测评结果与专业建议</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>

    <!-- 健康科普 -->
    <view class="feature-card" bindtap="goToArticles">
      <view class="feature-icon">📚</view>
      <view class="feature-info">
        <text class="feature-title">健康科普</text>
        <text class="feature-desc">心理健康知识与康复指导</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>
  </view>
</view>
