<!-- pages/index/index.wxml -->
<view class="home-container gradient-bg">
  <!-- 顶部欢迎区 -->
  <view class="welcome-section">
    <view class="welcome-time">
      <text class="title-text">智情守护</text>
      <text class="date-text">{{currentDate}}</text>
    </view>
    <!-- 情绪测试入口 - 优化版本 -->
    <view class="emotion-test-day {{morningFilled ? 'completed' : isMorningOpen ? 'pending' : 'unopened'}}"
          bindtap="goToEmotionTest"
          data-period="morning">
      <view class="entry-content">
        <view class="entry-icon">☀️</view>
        <view class="entry-info">
          <text class="entry-title">早间情绪测试</text>
          <text class="entry-subtitle">08:00 - 10:00</text>
        </view>
        <view class="entry-status">
          <view class="status-badge {{morningFilled ? 'completed' : isMorningOpen ? 'pending' : 'unopened'}}">
            <text class="status-text">
              {{morningFilled ? '🌱 已完成' : isMorningOpen ? '🔔 未测试' : '🔒 未开放'}}
            </text>
          </view>
        </view>
      </view>
    </view>
    <view class="emotion-test-night {{eveningFilled ? 'completed' : isEveningOpen ? 'pending' : 'unopened'}}"
          bindtap="goToEmotionTest"
          data-period="evening">
      <view class="entry-content">
        <view class="entry-icon">🌙</view>
        <view class="entry-info">
          <text class="entry-title">晚间情绪测试</text>
          <text class="entry-subtitle">20:00 - 22:00</text>
        </view>
        <view class="entry-status">
          <view class="status-badge {{eveningFilled ? 'completed' : isEveningOpen ? 'pending' : 'unopened'}}">
            <text class="status-text">
              {{eveningFilled ? '🌱 已完成' : isMorningOpen ? '🔔 未测试' : '🔒 未开放'}}
            </text>
          </view>
        </view>
      </view>
    </view>
  </view>
  <!-- 认知评估引导卡片 -->
  <view wx:if="{{showCognitiveGuide}}" class="cognitive-guide-card">
    <view class="guide-header">
      <view class="guide-title-area">
        <text class="guide-icon">🧠</text>
        <view class="guide-text">
          <text class="guide-title">智能认知评估</text>
          <text class="guide-subtitle">流程化的认知状态快速测评</text>
        </view>
      </view>
      <view class="close-btn" catchtap="closeCognitiveGuide">
        <text>×</text>
      </view>
    </view>
    <view class="guide-content">
      <!-- <view class="guide-steps">
        <view class="guide-step">
          <text class="step-num">1</text>
          <text class="step-text">AI智能分析</text>
        </view>
        <view class="step-arrow">→</view>
        <view class="guide-step">
          <text class="step-num">2</text>
          <text class="step-text">个性化测评</text>
        </view>
        <view class="step-arrow">→</view>
        <view class="guide-step">
          <text class="step-num">3</text>
          <text class="step-text">专业报告</text>
        </view>
      </view> -->
      <view class="guide-actions">
        <button class="guide-btn" bindtap="startCognitiveFlow">立即开始</button>
      </view>
    </view>
  </view>
  <!-- 快捷功能区 -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAssessment">
      <view class="action-icon">📝</view>
      <text class="action-text">认知测评</text>
    </view>
    <view class="action-item" bindtap="goToReports">
      <view class="action-icon">📊</view>
      <text class="action-text">历史记录</text>
    </view>
    <view class="action-item" bindtap="goToArticles">
      <view class="action-icon">📚</view>
      <text class="action-text">健康科普</text>
    </view>
  </view>
  <!-- 功能卡片区 -->
  <view class="features-section">
    <view class="section-title">实用功能</view>
    <!-- 健康科普 -->
    <view class="feature-card" bindtap="goToArticles">  
      <view class="feature-icon">📚</view>
      <view class="feature-info">
        <text class="feature-title">健康科普</text>
        <text class="feature-desc">心理健康知识科普</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>
    <!-- 其他测评 -->
    <view class="feature-card" bindtap="goToAssessment">
      <view class="feature-icon">🏥</view>
      <view class="feature-info">
        <text class="feature-title">其他测评</text>
        <text class="feature-desc">其他量表测试</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>
    <!-- 训练模式 -->
    <view class="feature-card" bindtap="goToTrainTest">
      <view class="feature-icon">🌱</view>
      <view class="feature-info">
        <text class="feature-title">训练模式</text>
        <text class="feature-desc">测试测评流程</text>
      </view>
      <view class="feature-arrow">→</view>
    </view>
  </view>
</view>