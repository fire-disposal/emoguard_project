<!--pages/assessment/select/select.wxml-->
<view class="select-container gradient-bg">
  <view class="select-header">
    <text class="header-title">选择量表</text>
    <text class="header-subtitle">选择适合您的心理测评量表</text>
  </view>

  <!-- 认知评估流程入口 -->
  <view wx:if="{{showFlowEntry}}" class="flow-entry-card" bindtap="startCognitiveFlow">
    <view class="flow-icon">🧠</view>
    <view class="flow-content">
      <view class="flow-title">认知功能评估流程</view>
      <view class="flow-desc">系统引导，按顺序完成 SCD-Q9、MMSE、MoCA 评估</view>
    </view>
    <view class="flow-badge">推荐</view>
  </view>

  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-text">加载中...</text>
  </view>

  <view wx:elif="{{scales.length === 0}}" class="empty-state">
    <text class="empty-icon">📝</text>
    <text class="empty-text">暂无可用量表</text>
  </view>

  <view wx:else class="scales-list">
    <view class="list-title">单独测评</view>
    <view 
      wx:for="{{scales}}" 
      wx:key="id" 
      class="scale-card card"
      data-id="{{item.id}}"
      bindtap="startAssessment"
    >
      <view class="scale-header">
        <text class="scale-name">{{item.name}}</text>
        <text class="scale-code">{{item.code}}</text>
      </view>
      <text class="scale-desc">{{item.description || '专业心理健康评估量表'}}</text>
      <view class="scale-footer">
        <view class="scale-info">
          <text class="info-label">题目数量</text>
          <text class="info-value">{{item.questions.length}}题</text>
        </view>
        <view class="scale-info">
          <text class="info-label">类型</text>
          <text class="info-value">{{item.type}}</text>
        </view>
      </view>
      <view class="start-btn">
        <text class="btn-text">开始测评</text>
        <text class="btn-arrow">→</text>
      </view>
    </view>
  </view>
</view>
