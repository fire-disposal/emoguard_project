# 智能测评后端解耦与重构说明

## 1. 方案概述

- 智能测评流程控制、导航、动态量表推送等全部迁移到前端，后端不再负责流程推进。
- 后端新建 `apps/cognitive_flow`，仅负责测评答卷存储与评分，暴露“提交答卷/获取结果”API。
- 原 `apps/scales` 仅保留单量表配置化问卷能力，相关API与服务不变。

## 2. 主要变更点

### 后端

- `apps/scales/views.py` 移除 `/smart-assessment/*` 相关API。
- `apps/scales/assessment_core.py` 流程控制、导航、动态推送等逻辑全部废弃。
- 新增 `apps/cognitive_flow`，仅包含：
  - 答卷模型（无流程字段）
  - 评分服务（可复用原有评分逻辑）
  - “提交答卷/获取结果”API

### 前端

- 智能测评流程、导航、量表推送全部由前端实现。
- 前端需根据业务规则自行实现流程推进、量表切换、完成判定等。

## 3. 兼容性与迁移建议

- 原有单量表配置化问卷功能不变，继续通过 `apps/scales` 提供。
- 智能测评相关数据交互请全部切换至 `apps/cognitive_flow` 新API。
- 前端需同步调整流程实现，确保与新API对接。

## 4. 目录结构参考

- apps/cognitive_flow/models.py
- apps/cognitive_flow/services.py
- apps/cognitive_flow/views.py
- apps/cognitive_flow/serializers.py

## 5. 其他说明

- 后端极大简化，维护成本降低，流程灵活性提升。
- 如需扩展评分逻辑，可在 `apps/cognitive_flow/services.py` 内实现。
